/*! Fancy Validate v0.1.2 | Copyright 2012 cormin.lu@gmail.com | MIT Licensed | Build 05/05/2012 */
(function(a){function l(a,b,e){function h(){a.value&&c.addClass(f,"w-hide")}if(!(this instanceof l))return new l(a,b);var f=document.createElement("span");if(e){var g=document.createElement("span");a.parentNode.insertBefore(g,a),g.appendChild(f),g.appendChild(a),c.addClass(g,"w-wrapper")}else a.parentNode.insertBefore(f,a);c.addClass(f,"w-label"),f.innerHTML=b,f.style.height=f.style.lineHeight=a.offsetHeight+"px",h(),d.add(a,"focusin",function(){h(),a.value||c.addClass(f,"w-active")}),d.add(a,"focusout",function(){a.value||c.removeClass(f,"w-active w-hide")}),d.add(a,"keyup",h),d.add(f,"click",function(){h(),c.focus(a)})}var b=a.core,c=a.dom,d=a.event,e={email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,url:/^(http|https|ftp)\:\/\/[a-z\d\-\.]+\.[a-z]{2,3}(:[a-z\d]*)?\/?([a-z\d\-\._\?\,\'\/\\\+&amp;%\$#\=~])*$/i,rfc3896url:new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,date:/^(19|20)\d\d([- /.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])(?: ([01]\d|2[0-3])(:[0-5]\d){0,2})?$/,time:/^([01]\d|2[0-3])(:[0-5]\d){0,2}$/,zipcode:/^\d{6}$/,compressed:/.+\.(7z|zip|rar|tar|taz|tgz|gz|gzip)$/i,picture:/.+\.(jpe?g|bmp|png|gif|ico|pcx|tif|raw|tga)$/i,chinese:/^[\u0391-\uFFE5\u4e00-\u9fa5]+$/,phone:/^([(]?0\d{2,3}[)]?[-]?)?\s?\d{4}\-?\d{4}(-\d+)?$/,mobile:/^(1[3458])\d{9}$/},f={email:"请输入一个有效的的电子邮件地址",url:"请输入一个有效的的URL地址",ipv4:"请输入有效的ip地址",date:"请输入一个有效的日期",time:"请输入一个有效的时间",zipcode:"请输入一个有效的邮编",compressed:"请选择一个有效的压缩文件",picture:"请选择一个有效的图片文件",chinese:"请输入中文",phone:"请输入一个有效的电话号码",mobile:"请输入一个有效的手机号码"},g={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},h=function(a){var b,c=0;if(!/^\d{17}(\d|x)$/i.test(a))return"你输入的身份证长度或格式错误";a=a.replace(/x$/i,"a");if(!g[parseInt(a.substr(0,2))])return"你的身份证地区非法";sBirthday=a.substr(6,4)+"-"+Number(a.substr(10,2))+"-"+Number(a.substr(12,2)),b=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate())return"身份证上的出生日期非法";for(var d=17;d>=0;d--)c+=Math.pow(2,d)%11*parseInt(a.charAt(17-d),11);return c%11!=1?"你输入的身份证号非法":!0};a.addMethod("idcard",function(a,b){return this.optional(b)||h(a)===!0},"请输入一个有效的身份证号码"),b.each(e,function(b,c){a.addPattern(c,b,f[c])});var i=b.ajax=function(a){this.url=a,this.xhr=i.create()};b.extend(i,{create:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");b.error("XMLHTTP object could be created.")},param:function(a){var c=[];if(b.isArray(a))b.each(a,function(){c.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))});else for(var d in a)b.isArray(a[d])?b.each(a[d],function(){c.push(encodeURIComponent(d)+"="+encodeURIComponent(this))}):c.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return c.join("&").replace(/%20/g,"+")},prototype:{request:function(a){var b,c=this.url,d=this.xhr,e=a.method||"POST";this.isrun&&(this.isrun=!1,d.abort()),this.isrun=!0,d.onreadystatechange=function(){d.readyState==4&&a.callback(d.responseText,d.status,d)};try{b=i.param(a.data),d.open(e,c,!0),d.setRequestHeader("Content-Length",b.length),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(b)}catch(f){a.callback&&a.callback(d.responseText,d.status,d,f)}finally{this.isrun=!1}},abort:function(){this.xhr&&this.xhr.abort()}}});var j={ing:"正在请求...",failed:"验证失败",error:"请求失败"},k=function(a){return a==1};a.addMethod("ajax",function(a,c,d){var e=this,f=this.attr(c),g=this.getKey(c),h=this.settings.messages[g],l=b.isString(d)?d:d.url,m=d.callback||k,n={};return h||(h=this.settings.messages[g]={}),f.ajax||(f.ajax=new i(l),f.ajaxMessage=h.ajax),h.ajax=j.ing,n[!b.isString(d)&&d.key||g]=a,f.ajax.request({data:n,callback:function(a,b,d,g){var i=b==200&&m(a),k=(h.ajax=b==200?f.ajaxMessage:j.error)||j.failed;e.addResult(i,c,k),e.hideErrors(),e.showErrors()}}),this.optional(c)||!1},j.ing),b.extend(!0,a,{watermark:l,getKeyForAspnet:function(c){if(!c.name)return;if(b.inArray("__EVENTTARGET __EVENTARGUMENT __VIEWSTATE __EVENTVALIDATION".split(" "),c.name)>-1)return;var d=c.name.split("$"),e=d.length,f;return e===1?d[0]:(f=d[e-1],a.core.isDigit(f)?d[e-2]:f)},placeHolder:function(a){var d,e="placeholder"in document.createElement("input");e||b.each(a,function(a){d=c.attr(a,"placeholder"),d&&l(a,d)})},bubbleTip:function(b,d){c.addClass(b,"b-b e-bubble"),a.appendContainer.call(this,b,d),b.innerHTML='<span class="b-cor b-cor10 e-b-bot"></span><span class="b-cor b-cor10 e-b-top"></span><p class="b-con"></p>',b.textNode=b.childNodes[2],b.vtarget=d},arrowTip:function(b,d){c.addClass(b,"b-b e-arrow"),a.appendContainer.call(this,b,d),b.innerHTML='<span class="b-cor b-cor15"></span><p class="b-con"></p>',b.textNode=b.childNodes[1],b.vtarget=d},tipText:function(b,c){b.textNode.innerHTML=c,a.appendContainer.call(this,b,b.vtarget)},prototype:{placeHolder:function(){a.placeHolder(this.elements())}}})})(window.fancy);